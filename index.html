<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Amazing Skull: A Guide for Young Explorers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Energetic & Playful (Cyan, Pink, Yellow, Purple) -->
    <!-- Application Structure Plan: 
         1. Hero Header: Catchy title and introduction.
         2. Interactive Anatomy Lab (Organize/Inform): A list of skull parts acts as a controller for a dynamic display card. 
         3. Data Zone (Compare/Relationships): Visualizing abstract concepts like 'Strength' and 'Movement'.
         4. AI Anatomist (Interactivity): ‚ú® New Gemini-powered chat for custom questions.
         5. Fun Facts (Inform): ‚ú® New Gemini-powered dynamic fact generator.
         6. Quiz (Interact): Active recall.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #ecfeff; /* Cyan-50 */
        }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        ::-webkit-scrollbar {
            width: 12px;
        }
        ::-webkit-scrollbar-track {
            background: #cffafe;
        }
        ::-webkit-scrollbar-thumb {
            background: #06b6d4;
            border-radius: 6px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #0891b2;
        }

        @keyframes pulse-soft {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        .ai-glow {
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.4);
            animation: pulse-soft 3s infinite ease-in-out;
        }
    </style>
</head>
<body class="text-slate-800">

    <header class="bg-cyan-500 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <span class="text-3xl">üíÄ</span>
                <h1 class="text-2xl md:text-3xl font-black tracking-tight">Skull Explorer</h1>
            </div>
            <nav class="hidden md:flex space-x-6 font-bold">
                <a href="#anatomy" class="hover:text-yellow-300 transition">The Parts</a>
                <a href="#charts" class="hover:text-yellow-300 transition">Skull Stats</a>
                <a href="#ai-chat" class="hover:text-yellow-300 transition">Ask AI</a>
                <a href="#facts" class="hover:text-yellow-300 transition">Fun Facts</a>
            </nav>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 py-12 space-y-20">

        <!-- INTRO SECTION -->
        <section class="text-center space-y-6">
            <div class="inline-block bg-yellow-400 text-yellow-900 font-bold px-4 py-1 rounded-full transform -rotate-2">
                Welcome Young Explorers!
            </div>
            <h2 class="text-4xl md:text-6xl font-black text-cyan-600">My Amazing Skull</h2>
            <p class="text-xl md:text-2xl text-slate-600 max-w-3xl mx-auto leading-relaxed">
                Think of your skull as a built-in <span class="text-pink-500 font-bold">helmet made of bone</span>. 
                It's like a 3D puzzle that protects your most important treasure: <span class="bg-yellow-200 px-2 rounded">your brain!</span> üß†
            </p>
        </section>

        <!-- SECTION 1: ANATOMY EXPLORER -->
        <section id="anatomy" class="scroll-mt-24">
            <div class="mb-8 border-l-8 border-pink-500 pl-6">
                <h3 class="text-3xl font-black text-slate-800">1. Explore the Skull Parts</h3>
                <p class="text-lg text-slate-600 mt-2">
                    Click on the buttons below to learn about the different pieces of the puzzle and the special jobs they do.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-12 gap-6 bg-white rounded-3xl p-6 shadow-xl border-4 border-cyan-100">
                <div class="md:col-span-5 flex flex-col gap-3">
                    <p class="font-bold text-slate-400 uppercase tracking-widest text-sm mb-2">Select a bone:</p>
                    <div id="button-list" class="space-y-2"></div>
                </div>
                <div class="md:col-span-7">
                    <div id="display-card" class="h-full bg-cyan-50 rounded-2xl border-2 border-cyan-200 p-8 flex flex-col justify-center items-center text-center transition-all duration-300">
                        <div class="text-8xl mb-4 animate-bounce">üëÜ</div>
                        <h4 class="text-2xl font-bold text-cyan-800">Select a part to learn more!</h4>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: AI ANATOMIST (‚ú® GEMINI FEATURE 1) -->
        <section id="ai-chat" class="scroll-mt-24">
            <div class="bg-white rounded-3xl p-8 shadow-2xl border-4 border-cyan-400 ai-glow">
                <div class="flex flex-col md:flex-row gap-8 items-center">
                    <div class="md:w-1/3 text-center md:text-left">
                        <div class="text-6xl mb-4">‚ú®ü§ñ</div>
                        <h3 class="text-3xl font-black text-cyan-600">Ask the AI Anatomist!</h3>
                        <p class="text-slate-600 mt-4">
                            Got a weird question about your head? Our AI expert knows all the secrets of the skeleton!
                        </p>
                    </div>
                    <div class="md:w-2/3 w-full">
                        <div id="chat-container" class="bg-slate-50 rounded-2xl p-4 h-64 overflow-y-auto mb-4 border-2 border-slate-100 flex flex-col gap-3">
                            <div class="bg-white p-3 rounded-lg shadow-sm border-l-4 border-cyan-500 max-w-[90%]">
                                <p class="text-sm font-bold text-cyan-600">AI Anatomist</p>
                                <p>Hi! Ask me anything about skulls! For example: "Why is the jaw special?"</p>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <input type="text" id="ai-input" placeholder="Type your skull question..." class="flex-1 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-cyan-500 font-bold">
                            <button onclick="askAI()" id="send-btn" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold px-6 py-3 rounded-xl transition-all flex items-center gap-2">
                                ‚ú® Ask
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: DATA VISUALIZATION (CHARTS) -->
        <section id="charts" class="scroll-mt-24">
            <div class="mb-8 border-l-8 border-purple-500 pl-6">
                <h3 class="text-3xl font-black text-slate-800">3. Skull Statistics</h3>
                <p class="text-lg text-slate-600 mt-2">
                    Let's look at some data to see how strong and unique your skull really is!
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white rounded-3xl shadow-lg p-6 border-b-8 border-purple-400">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-3xl">üí™</span>
                        <h4 class="text-xl font-bold text-purple-700">How Strong is Bone?</h4>
                    </div>
                    <p class="text-slate-600 mb-6 min-h-[50px]">
                        Did you know? Bone acts as armor. It is actually <strong>stronger than some types of steel</strong>!
                    </p>
                    <div class="chart-container">
                        <canvas id="strengthChart"></canvas>
                    </div>
                </div>

                <div class="bg-white rounded-3xl shadow-lg p-6 border-b-8 border-pink-400">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-3xl">üó£Ô∏è</span>
                        <h4 class="text-xl font-bold text-pink-600">Moving vs. Fixed Bones</h4>
                    </div>
                    <p class="text-slate-600 mb-6 min-h-[50px]">
                        The skull is a "Fixed Puzzle". Only <strong>one</strong> bone can move freely to let you talk and eat!
                    </p>
                    <div class="chart-container">
                        <canvas id="movementChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: FUN FACTS (‚ú® GEMINI FEATURE 2) -->
        <section id="facts" class="scroll-mt-24">
            <div class="text-center mb-10">
                <h3 class="text-4xl font-black text-slate-800 bg-yellow-200 inline-block px-6 py-2 rounded-lg transform rotate-1">
                    Fun Skull Facts! üåü
                </h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="facts-grid">
                <div class="bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition-shadow border-t-4 border-cyan-400">
                    <div class="text-4xl mb-3">üß©</div>
                    <h4 class="text-xl font-bold text-cyan-600 mb-2">The Fixed Puzzle</h4>
                    <p class="text-slate-600">Most skull bones are "knitted" together tightly and don't move. These special joints are called <strong>sutures</strong>.</p>
                </div>

                <div class="bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition-shadow border-t-4 border-pink-400">
                    <div class="text-4xl mb-3">üë∂</div>
                    <h4 class="text-xl font-bold text-pink-600 mb-2">Soft Spots</h4>
                    <p class="text-slate-600">When you are a baby, your skull bones have soft spots to help your head grow as you get bigger!</p>
                </div>

                <div class="bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition-shadow border-t-4 border-yellow-400 relative overflow-hidden group">
                    <div class="flex flex-col h-full justify-between">
                        <div>
                            <div class="text-4xl mb-3" id="dynamic-fact-icon">üéÅ</div>
                            <h4 class="text-xl font-bold text-yellow-600 mb-2" id="dynamic-fact-title">Mystery Fact</h4>
                            <p class="text-slate-600" id="dynamic-fact-text">Click the button below to discover a new secret fact from the AI!</p>
                        </div>
                        <button onclick="generateFact()" id="fact-btn" class="mt-4 bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-2 px-4 rounded-xl transition-all">
                            ‚ú® Get New Fact
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: QUIZ -->
        <section class="max-w-2xl mx-auto bg-slate-800 rounded-3xl p-8 md:p-12 text-white shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 right-0 text-9xl opacity-10 transform translate-x-10 -translate-y-10">‚ùì</div>
            <h3 class="text-3xl font-black mb-6">Pop Quiz! üß†</h3>
            <div class="space-y-6">
                <div class="bg-slate-700/50 p-6 rounded-xl border border-slate-600">
                    <p class="font-bold text-xl mb-4">1. Which bone is the "Forehead"?</p>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="checkAnswer(this, true)" class="quiz-btn bg-slate-600 hover:bg-cyan-500 py-3 rounded-lg font-bold transition">Frontal Bone</button>
                        <button onclick="checkAnswer(this, false)" class="quiz-btn bg-slate-600 hover:bg-pink-500 py-3 rounded-lg font-bold transition">Mandible</button>
                    </div>
                    <p class="feedback hidden mt-3 font-bold"></p>
                </div>
            </div>
        </section>

        <footer class="text-center text-slate-400 py-12">
            <p>Generated for Young Explorers with ‚ú® Gemini AI Intelligence</p>
        </footer>

    </main>

    <script>
        const apiKey = ""; // API Key is provided by the environment

        // --- GEMINI API HELPER ---
        async function callGemini(prompt, systemPrompt = "You are a friendly kids science educator.") {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] }
            };

            let delay = 1000;
            for (let i = 0; i < 5; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                        return result.candidates[0].content.parts[0].text;
                    }
                } catch (err) {
                    if (i === 4) throw err;
                    await new Promise(r => setTimeout(r, delay));
                    delay *= 2;
                }
            }
            throw new Error("Failed to reach AI");
        }

        // --- FEATURE 1: AI ANATOMIST CHAT ---
        async function askAI() {
            const input = document.getElementById('ai-input');
            const chat = document.getElementById('chat-container');
            const btn = document.getElementById('send-btn');
            const userText = input.value.trim();

            if (!userText) return;

            // Add user message
            const userDiv = document.createElement('div');
            userDiv.className = "bg-cyan-100 p-3 rounded-lg shadow-sm self-end max-w-[90%]";
            userDiv.innerHTML = `<p class="text-sm font-bold text-cyan-800">You</p><p>${userText}</p>`;
            chat.appendChild(userDiv);
            input.value = "";
            chat.scrollTop = chat.scrollHeight;

            // Loading state
            btn.disabled = true;
            btn.innerText = "Thinking...";

            try {
                const response = await callGemini(
                    userText, 
                    "You are the AI Anatomist for a kids website. Explain skull anatomy in simple, fun, and safe terms for an 8-year-old. Keep answers under 3 sentences. Use emojis."
                );
                
                const aiDiv = document.createElement('div');
                aiDiv.className = "bg-white p-3 rounded-lg shadow-sm border-l-4 border-cyan-500 max-w-[90%]";
                aiDiv.innerHTML = `<p class="text-sm font-bold text-cyan-600">AI Anatomist</p><p>${response}</p>`;
                chat.appendChild(aiDiv);
            } catch (err) {
                const errDiv = document.createElement('div');
                errDiv.className = "bg-red-50 p-3 rounded-lg text-red-500 text-sm";
                errDiv.innerText = "Sorry, my brain is a bit foggy! Try again later.";
                chat.appendChild(errDiv);
            } finally {
                btn.disabled = false;
                btn.innerText = "‚ú® Ask";
                chat.scrollTop = chat.scrollHeight;
            }
        }

        // --- FEATURE 2: DYNAMIC FACT GENERATOR ---
        async function generateFact() {
            const btn = document.getElementById('fact-btn');
            const title = document.getElementById('dynamic-fact-title');
            const text = document.getElementById('dynamic-fact-text');
            const icon = document.getElementById('dynamic-fact-icon');

            btn.disabled = true;
            btn.innerText = "‚ú® Exploring...";

            try {
                const prompt = "Generate one short, surprising, and fun fact about human skulls or bones that is suitable for children. Include a short 2-3 word title and a single emoji character for that fact. Format as: Title: [Title] | Fact: [Fact] | Emoji: [Emoji]";
                const response = await callGemini(prompt, "You are a fun science fact generator.");
                
                // Simple parsing
                const parts = response.split('|').map(p => p.split(':')[1]?.trim());
                if (parts.length >= 3) {
                    title.innerText = parts[0];
                    text.innerText = parts[1];
                    icon.innerText = parts[2];
                }
            } catch (err) {
                text.innerText = "I couldn't find a new fact right now. Did you know your skull is made of 22 bones?";
            } finally {
                btn.disabled = false;
                btn.innerText = "‚ú® Get New Fact";
            }
        }

        // --- DATA OBJECTS ---
        const skullParts = [
            {
                id: 'cranium',
                title: 'The Cranium',
                subtitle: 'The Brain Bucket',
                icon: 'ü™ñ',
                desc: 'The top part of your skull. It is very thick and strong.',
                job: 'Acts like a hard shell for your brain. Just like a helmet protects you when you ride a bike, the cranium protects your brain all day long!',
                color: 'bg-blue-100 text-blue-900 border-blue-300'
            },
            {
                id: 'frontal',
                title: 'Frontal Bone',
                subtitle: 'The Forehead',
                icon: 'ü§î',
                desc: 'This is the bone right at the front, above your eyes.',
                job: 'It protects the front part of your brain, which helps you think, learn, and make decisions.',
                color: 'bg-green-100 text-green-900 border-green-300'
            },
            {
                id: 'maxilla',
                title: 'The Maxilla',
                subtitle: 'Upper Jaw',
                icon: 'üò¨',
                desc: 'The bone that holds your top teeth and the area under your nose.',
                job: 'It stays still while you eat and helps hold your face together.',
                color: 'bg-orange-100 text-orange-900 border-orange-300'
            },
            {
                id: 'mandible',
                title: 'The Mandible',
                subtitle: 'Lower Jaw',
                icon: 'üó£Ô∏è',
                desc: 'This is the only bone in your skull that moves!',
                job: 'It allows you to chew your food, talk to your friends, and sing songs.',
                color: 'bg-red-100 text-red-900 border-red-300'
            }
        ];

        // --- INTERACTIVITY: ANATOMY EXPLORER ---
        const buttonList = document.getElementById('button-list');
        const displayCard = document.getElementById('display-card');

        function initExplorer() {
            skullParts.forEach((part) => {
                const btn = document.createElement('button');
                btn.className = 'w-full text-left p-4 rounded-xl border-2 border-slate-200 hover:border-cyan-400 hover:bg-cyan-50 hover:shadow-md transition-all flex items-center group bg-white';
                btn.innerHTML = `
                    <span class="text-2xl mr-3 group-hover:scale-125 transition-transform">${part.icon}</span>
                    <div>
                        <div class="font-bold text-slate-700">${part.title}</div>
                        <div class="text-xs text-slate-400 font-bold uppercase">${part.subtitle}</div>
                    </div>
                `;
                btn.onclick = () => loadPart(part);
                buttonList.appendChild(btn);
            });
        }

        function loadPart(part) {
            displayCard.style.opacity = '0';
            displayCard.style.transform = 'translateY(10px)';
            setTimeout(() => {
                displayCard.className = `h-full rounded-2xl border-4 p-8 flex flex-col items-start text-left transition-all duration-300 shadow-xl ${part.color}`;
                displayCard.innerHTML = `
                    <div class="w-full flex justify-between items-start mb-4">
                        <div class="bg-white/60 p-4 rounded-full text-6xl shadow-sm backdrop-blur-sm">${part.icon}</div>
                        <span class="bg-white/50 px-3 py-1 rounded-full text-xs font-black uppercase tracking-widest">Bone Info</span>
                    </div>
                    <h2 class="text-3xl md:text-4xl font-black mb-1">${part.title}</h2>
                    <h3 class="text-lg font-bold opacity-75 mb-6 uppercase tracking-wide">${part.subtitle}</h3>
                    <div class="bg-white/50 p-4 rounded-xl mb-4 w-full">
                        <p class="font-bold text-lg mb-1">What is it?</p>
                        <p>${part.desc}</p>
                    </div>
                    <div class="bg-white p-5 rounded-xl w-full mt-auto shadow-sm">
                        <p class="font-bold text-lg text-slate-800 mb-1">‚ú® Special Job:</p>
                        <p class="font-semibold text-slate-700">${part.job}</p>
                    </div>
                `;
                displayCard.style.opacity = '1';
                displayCard.style.transform = 'translateY(0)';
            }, 200);
        }

        initExplorer();

        // --- QUIZ LOGIC ---
        function checkAnswer(btn, isCorrect) {
            const container = btn.parentElement.parentElement;
            const feedback = container.querySelector('.feedback');
            if(isCorrect) {
                btn.className = "quiz-btn bg-green-500 text-white py-3 rounded-lg font-bold transition";
                feedback.textContent = "üéâ Correct! Great job!";
                feedback.className = "feedback mt-3 font-bold text-green-400 block animate-bounce";
            } else {
                btn.className = "quiz-btn bg-red-500 opacity-50 text-white py-3 rounded-lg font-bold transition";
                feedback.textContent = "Oops! Try again.";
                feedback.className = "feedback mt-3 font-bold text-red-300 block";
            }
        }

        // --- CHART.JS ---
        document.addEventListener('DOMContentLoaded', function() {
            const wrapLabels = (label) => label.length > 16 ? [label.slice(0, 16), label.slice(16)] : label;
            const tooltipPlugin = {
                tooltip: {
                    callbacks: {
                        title: (items) => Array.isArray(items[0].chart.data.labels[items[0].dataIndex]) ? items[0].chart.data.labels[items[0].dataIndex].join(' ') : items[0].chart.data.labels[items[0].dataIndex]
                    }
                }
            };

            new Chart(document.getElementById('strengthChart').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Wood', 'Plastic', 'Skull Bone', 'Steel'].map(wrapLabels),
                    datasets: [{
                        data: [30, 20, 85, 95],
                        backgroundColor: ['#cbd5e1', '#cbd5e1', '#a855f7', '#64748b'],
                        borderRadius: 10
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { ...tooltipPlugin, legend: { display: false } } }
            });

            new Chart(document.getElementById('movementChart').getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['Moving Bones', 'Fixed Bones'].map(wrapLabels),
                    datasets: [{
                        data: [1, 20],
                        backgroundColor: ['#ec4899', '#e2e8f0']
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { ...tooltipPlugin } }
            });
        });
    </script>
</body>
</html>
